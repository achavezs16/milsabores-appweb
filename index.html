<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasteler√≠a Mil Sabores - Inicio</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        body, footer{
            margin: 0;
            font-family: 'Lato', sans-serif;
        }
        header h1{
            font-family: 'Pacifico', cursive;
        }
    </style>        
</head>
<header>
    <div class="logo-container">
        <a href="./index.html" class="logo-container">
        <img width="120px" src="./assets/img/pasteleria-mil-sabores-logo-1.svg">
        </a>
    </div>
    <div class="title">
        <h1 style="margin: 0;">Pasteler√≠a Mil Sabores</h1>
        <p style="margin: 0;">50 a√±os endulzando tus recuerdos</p>
    </div>
    <div class="icons" style="display: flex; gap: 30px;">
        <div class="cart-icon">
            <a href="./carrito-compra.html" class="cart-icon">
            <img src="./assets/img/shopping-cart.svg" alt="shopping-cart">
            <span id="cart-count">0</span>
            </a>
        </div>
        <div class="user-icon">
            <a href="./login.html" class="user-icon">
            <img width="50px" src="./assets/img/user-icon.png" alt="user-icon">
            </a>
        </div>
    </div>
</header>
<body>
    <nav class="navbar">
        <ul class="nav-links">
            <li><a href="./index.html">Inicio</a></li>
            <li><a href="./quienes-somos.html">Quienes somos</a></li>
            <li><a href="./catalogo.html">Cat√°logo</a></li>
            <li><a href="./blog.html">Blog</a></li>
            <li><a href="./contacto.html">Contacto</a></li>
        </ul>
    </nav>
    <main>
        <section class="hero">
            <h2>Bienvenidos a Pasteler√≠a Mil Sabores</h2>
            <p>¬°Ahora estamos a un paso m√°s cerca de ti!</p>
        </section>
        <div class="contenedor">
            <section class="destacados">
                <h3>Productos Destacados</h3>
                <div class="productos">
                    <div class="producto">
                        <img src="./assets/img/torta-circular-manjar.webp">
                        <h4 class="nombre">Torta Circular de Manjar</h4>
                        <p class="precio">$42.000 CLP</p>
                             <div class="control-cantidad">
                                <button class="menos">-</button>
                                <span class="num">0</span>
                                <button class="mas">+</button>
                            </div>
                            <button class="agregar">Agregar al carrito</button>                       
                    </div>
                    <div class="producto">
                        <img src="./assets/img/torta-cuadrada-frutas.webp">
                        <h4 class="nombre">Torta Cuadrada de Frutas</h4>
                        <p class="precio">$50.000 CLP</p>
                            <div class="control-cantidad">
                                <button class="menos">-</button>
                                <span class="num">0</span>
                                <button class="mas">+</button>
                            </div>
                            <button class="agregar">Agregar al carrito</button>                        
                    </div>
                    <div class="producto">
                        <img src="./assets/img/cheesecake-trad.avif">
                        <h4 class="nombre">Cheesecake Sin Az√∫car</h4>
                        <p class="precio">$47.000 CLP</p>
                            <div class="control-cantidad">
                                <button class="menos">-</button>
                                <span class="num">0</span>
                                <button class="mas">+</button>
                            </div>
                            <button class="agregar">Agregar al carrito</button>                        
                    </div>
                    <div class="producto">
                        <img src="./assets/img/galleta-veg-avena.jpg">
                        <h4 class="nombre">Galleta Vegana de Avena</h4>
                        <p class="precio">$4.500 CLP</p>
                            <div class="control-cantidad">
                                <button class="menos">-</button>
                                <span class="num">0</span>
                                <button class="mas">+</button>
                            </div>
                            <button class="agregar">Agregar al carrito</button>                        
                    </div>
                    <div class="producto">
                        <img src="./assets/img/empanada-de-manzanas.webp">
                        <h4 class="nombre">Empanadas de Manzanza</h4>
                        <p class="precio">$3.000 CLP</p>
                            <div class="control-cantidad">
                                <button class="menos">-</button>
                                <span class="num">0</span>
                                <button class="mas">+</button>
                            </div>
                            <button class="agregar">Agregar al carrito</button>                        
                    </div>       
                    <div class="producto">
                        <img src="./assets/img/torta-naranja.jpg">
                        <h4 class="nombre">Torta Sin Az√∫car de Naranja</h4>
                        <p class="precio">$48.000 CLP</p>
                            <div class="control-cantidad">
                                <button class="menos">-</button>
                                <span class="num">0</span>
                                <button class="mas">+</button>
                            </div>
                            <button class="agregar">Agregar al carrito</button>                        
                    </div>                                     
                </div>

            </section>


            <aside class="playlistMensual">
                <h3>Mil Sabores de: Septiembre 2025 üé∂</h3>
                <p>Playlist mensual cuarada por nuestro #TeamMilSabores en Valpara√≠so, Chile.</p>
                <p>Visita nuestras sucursales ubicadas en la quinta costa, tal vez escuches una de estas canciones...</p>
                <iframe data-testid="embed-iframe" 
                    style="margin-top: 30px; border-radius :12px"  
                    src="https://open.spotify.com/embed/playlist/0zu1O3HiwPYjV2hy9xHYOm?utm_source=generator" 
                    width="390px" height="450px" frameBorder="0" 
                    allowfullscreen="" 
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                    loading="lazy">
                </iframe>
            </aside>
        </div>
    </main>

    
</body>
<footer>
    <p>&copy; 2024 Pasteler√≠a 1000 Sabores. Todos los derechos reservados.</p>
    <p><a href="#">Pol√≠ticas de Privacidad</a> | <a href="#">T√©rminos y Condiciones</a></p>
    <p>S√≠guenos en redes sociales</p>
    <div class="rrss-icono">
        <img width="20px" src="./assets/img/instagram-logo-glyph.svg">
        <img width="20px" src="./assets/img/logo-tiktok.svg">
        <img width="20px" src="./assets/img/whatsapp-glyph-black-logo.svg">

    </div>
</footer>

<script>
    function obtenerCarrito() {
        return JSON.parse(localStorage.getItem("carrito")) || [];
    }

    function actualizarContador() {
        const carrito = obtenerCarrito();
        const totalItems = carrito.reduce((acc, item) => acc + item.cantidad, 0);
        const cartCountElement = document.getElementById("cart-count");
        if (cartCountElement) {
            cartCountElement.textContent = totalItems;
        }
    }

    function guardarCarrito(carrito) {
        localStorage.setItem("carrito", JSON.stringify(carrito));
    }
    
        /*AGREGAR PRODUCTOS*/
    const addToCartButtons = document.querySelectorAll(".agregar");

    addToCartButtons.forEach(button => {
        button.addEventListener("click", () => {
            const producto = button.closest(".producto");
            const nombre = producto.querySelector(".nombre").textContent;
            const precio = parseInt(producto.querySelector(".precio").textContent.replace(/\D/g,''));
            const cantidad = parseInt(producto.querySelector(".num").textContent);
            const imagen = producto.querySelector("img").src;

            if(cantidad <= 0) {
                mostrarMensaje(`Debes seleccionar al menos 1 unidad de ${nombre}`);
                return;
            }

            let carrito = obtenerCarrito();

            const existente = carrito.find(item => item.nombre === nombre);
            if(existente) {
                existente.cantidad += cantidad;
            } else {
                carrito.push({nombre, precio, cantidad, imagen});
            }

            guardarCarrito(carrito);
            actualizarContador();

            producto.querySelector(".num").textContent = 0;

            mostrarMensaje(`Agregaste ${cantidad} ${nombre} al carrito`);
        });
    });

    /* CONTROL BOTONES + - */
    document.querySelectorAll(".mas").forEach(btn => {
        btn.addEventListener("click", () => {
            const quantityElement = btn.parentElement.querySelector(".num");
            let value = parseInt(quantityElement.textContent);
            quantityElement.textContent = value + 1;
        });
    });

    document.querySelectorAll(".menos").forEach(btn => {
        btn.addEventListener("click", () => {
            const quantityElement = btn.parentElement.querySelector(".num");
            let value = parseInt(quantityElement.textContent);
            if (value > 1) {
                quantityElement.textContent = value - 1;
            }
        });
    });

    /*MENSAJE FLOTANTE*/
    function mostrarMensaje(mensaje) {
        const mensajeFlotante = document.getElementById("mensaje-flotante");
        mensajeFlotante.textContent = mensaje;
        mensajeFlotante.classList.add("mostrar");
        setTimeout(() => {
            mensajeFlotante.classList.remove("mostrar");
        }, 3000);
    }

    /*INICIALIZAR CONTADOR*/
    window.addEventListener("DOMContentLoaded", () => {
        actualizarContador();
    });

    // Actualizar contador apenas se cargue la p√°gina
    window.addEventListener("DOMContentLoaded", actualizarContador);
</script>



</html>